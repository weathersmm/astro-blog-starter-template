---
import Nav from '../components/Nav.astro';
import Hero from '../components/Hero.astro';
import FeaturesGrid from '../components/FeaturesGrid.astro';
import { getCollection } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';

// Fetch our products once at build time so we can show
// tagline teasers for EMS and Enterprise on the homepage.
const products = await getCollection('product');
const ems = products.find((p) => p.data.slug === 'rampart')?.data;
const angel = products.find((p) => p.data.slug === 'angel')?.data;
const homepageFeatures = [
  {
    title: 'Protocol-grounded clinical intelligence',
    body: 'Accuracy first for critical moments.',
  },
  {
    title: 'Supervisor-in-your-pocket',
    body: 'Company knowledge that answers instantly.',
  },
  {
    title: 'Simple to integrate',
    body: 'API-friendly, secure, and auditable.',
  },
];
---

<!doctype html>
<html lang="en">
    <head>
            <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    </head>
    <body>
            <Nav />
            <Hero
              title="Your AI Partner on Every Call â€” and at Every Desk"
              sub="Clinical intelligence for EMS. Knowledge intelligence for the enterprise. Built to be trusted, fast, and easy." />
            <FeaturesGrid features={homepageFeatures} />
            <section class="container" style="display:grid;gap:var(--gap);grid-template-columns:1fr 1fr">
              <div class="card">
                <h2>InCheck for EMS</h2>
                <p class="muted">{ems?.tagline}</p>
                <a class="btn" href="/ems">Explore EMS</a>
              </div>
              <div class="card">
                <h2>InCheck for Enterprise</h2>
                <p class="muted">{angel?.tagline}</p>
                <a class="btn" href="/enterprise">Explore Enterprise</a>
              </div>
            </section>
    </body>
</html>